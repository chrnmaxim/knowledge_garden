---
title: ะะทะผะตะฝะตะฝะธะต ัะตะบัะตัะพะฒ .env ัะฐะนะปะฐ
draft: false
tags:
  - CI
  - Linux
---
 ### ะัะฟะพะปัะทะพะฒะฐะฝะธะต `sed`
 
 ะะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะตะบัะตัะพะฒ, ัะบะฐะทะฐะฝะฝัั ะฒ `.env `ัะฐะนะปะต, ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ **workflow** ะผะพะถะฝะพ ัะบะพะฟะธัะพะฒะฐัั ัะฐะนะป ั ะฟัะธะผะตัะฐะผะธ `.env.example`  ะธ, ะธัะฟะพะปัะทัั ะบะพะผะฐะฝะดั `sed`, ะธะทะผะตะฝะธัั ะทะฝะฐัะตะฝะธั ะฟะตัะตะผะตะฝะฝัั, ัะบะฐะทะฐะฝะฝัั ะฒ ะบะฐัะตััะฒะต ะฟัะธะผะตัะฐ, ะฝะฐ ัะตะบัะตัั, ัะบะฐะทะฐะฝะฝัะต ะฒ GitHub Secrets ัะตะฟะพะทะธัะพัะธั.

```GitHub
ย backend_tests:
ย ย name: Backend Tests
ย ย runs-on: ubuntu-latest
ย ย needs: linter
ย ย steps:
ย ย ย - name: Check out repository
ย ย ย ย uses: actions/checkout@v4
  
ย ย ย - name: Add secrets to.env
ย ย ย ย run: |
ย ย ย ย ย cp -r backend/.env.example backend/.env
ย ย ย ย ย sed -i "/^VARIABLE=/s/=.*/=${{ secrets.VARIABLE }}/" backend/.env
```

ะะพะผะฐะฝะดะฐ `sed` โ ััะพ ะฟะพัะพะบะพะฒัะน ัะตะดะฐะบัะพั ัะตะบััะฐ (**s**treamย**ed**itor), ัะฐะฑะพัะฐััะธะน ะฟะพ ะฟัะธะฝัะธะฟั ะทะฐะผะตะฝั. ะะณะพ ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ะดะปั ะฟะพะธัะบะฐ, ะฒััะฐะฒะบะธ, ะทะฐะผะตะฝั ะธ ัะดะฐะปะตะฝะธั ััะฐะณะผะตะฝัะพะฒ ะฒ ัะฐะนะปะต.
* `-i` โ edit in-place;
* `/^VARIABLE=/` โ ะธัะตั ัััะพะบะธ, ัะพะดะตัะถะฐััั ัะบะฐะทะฐะฝะฝัั ะฟะตัะตะผะตะฝะฝัั;
* `s` โ ะบะพะผะฐะฝะดะฐ ะทะฐะผะตัะตะฝะธั;
* `/=.*/ `โ ะทะฐะผะตะฝะธัั ะฒัะต, ััะพ ะธะดะตั ะฟะพัะปะต ะทะฝะฐะบะฐ `=` ;
* `=${{ secrets.VARIABLE }}` โ ะทะฐะผะตะฝะธัั ะฝะฐ ัะตะบัะตั ะธะท GitHub Secrets;
* `backend/.env` โ ัะฐะนะป, ะฒ ะบะพัะพัะพะผ ะฝะฐะดะพ ะฒัะฟะพะปะฝะธัั ะพะฟะตัะฐัะธั.

### ะกะธะฝัะฐะบัะธั `s`-ะบะพะผะฐะฝะดั
```
s/AAAA/BBBB/options
```
* `s` โ ะบะพะผะฐะฝะดะฐ ะทะฐะผะตัะตะฝะธั;
* `AAAA`โ [[ะะตะณัะปััะฝัะต ะฒััะฐะถะตะฝะธั|regex]] , ะบะพัะพััะน ะฝะตะพะฑัะพะดะธะผะพ ะทะฐะผะตะฝะธัั;
* `BBBB`โ regex , ะฝะฐ ะบะพัะพััะน ะฝะตะพะฑัะพะดะธะผะพ ะทะฐะผะตะฝะธัั ะทะฝะฐัะตะฝะธะต `AAAA`;
----
๐ [[GitHub Actions]]

ะะพัะปะตะดะฝะตะต ะธะทะผะตะฝะตะฝะธะต: 23.09.2024 15:16